# 登録履歴UI改善計画

## 概要

登録履歴部分をモバイル端末で見やすいカード形式のUIに改善する。

## 現状の問題点

- テーブル形式で3列の情報が横並びになっている
- スマートフォンの小さい画面では情報が詰まって見づらい
- 判定結果(多い/少ない/一致)が色だけで表現されており、視覚的に分かりにくい

## 改善内容

### 1. CSS スタイルの追加

**対象ファイル**: `index.html` (85-91行目の後に追加)

以下のスタイルを追加:
- `.history-container` - 履歴コンテナのスタイル
- `.history-item` - 各履歴カードのスタイル(白背景、角丸、左ボーダー)
- `.history-item.diff-plus-item` - 「多い」場合の赤ボーダー
- `.history-item.diff-minus-item` - 「少ない」場合のオレンジボーダー
- `.history-time` - 時刻表示(小さめ、グレー)
- `.history-product` - 商品名(太字、大きめ)
- `.history-result` - 結果行(flexboxで左右配置)
- `.history-stock` - 在庫数(太字)
- `.history-badge` - 判定バッジ(角丸、背景色付き)
- `.badge-plus` / `.badge-minus` / `.badge-zero` - 各判定の色

### 2. HTML構造の変更

**対象ファイル**: `index.html` (164-180行目)

**変更前**:
```html
<table>形式で時間・商品名・結果を3列表示
```

**変更後**:
```html
<div class="history-container">
  <h3>登録履歴</h3>
  <div id="history-body">
    <!-- カードが動的に追加される -->
  </div>
</div>
```

### 3. JavaScript の修正

**対象ファイル**: `index.html` (351-368行目)

**関数**: `addHistory(name, actual, diffText)`

**変更前**:
- `<tr>`要素を作成してテーブル行として追加
- 色だけで判定を表現

**変更後**:
- `<div class="history-item">`要素を作成してカードとして追加
- 以下の構造で情報を表示:
  ```html
  <div class="history-item [判定クラス]">
    <div class="history-time">HH:MM:SS</div>
    <div class="history-product">商品名</div>
    <div class="history-result">
      <span class="history-stock">実在庫: XX</span>
      <span class="history-badge [バッジクラス]">判定</span>
    </div>
  </div>
  ```

## 視覚的な改善点

### カラーコーディング

| 判定 | 左ボーダー色 | バッジ背景色 | バッジ文字色 |
|------|------------|------------|------------|
| 一致 | 緑 (#5cb85c) | 薄緑 (#dff0d8) | 緑 (#5cb85c) |
| 多い | 赤 (#d9534f) | 薄赤 (#fce4ec) | 赤 (#d9534f) |
| 少ない | オレンジ (#f0ad4e) | 薄黄 (#fcf8e3) | オレンジ (#f0ad4e) |

### レイアウト

- **縦配置**: 時刻 → 商品名 → 結果(在庫数と判定バッジ)
- **左ボーダー**: 判定結果を一目で識別可能
- **カード間隔**: 10pxのマージンで見やすく分離
- **影**: 軽い影で立体感を演出

## 期待される効果

1. **可読性向上**: 情報が縦に並ぶため、スマホでスクロールしながら読みやすい
2. **視認性向上**: 左ボーダーとバッジで判定結果が一目で分かる
3. **タップしやすさ**: カード形式で各項目が大きく、誤タップを防止
4. **モダンなUI**: カード形式は現代的なモバイルUIの標準

## 影響範囲

- **変更ファイル**: `index.html` のみ
- **後方互換性**: 既存の機能に影響なし
- **データ**: データベースやAPIに変更なし

## ロールバック方法

もし元のテーブル形式に戻したい場合は、Gitで以前のコミットに戻すか、以下の変更を手動で元に戻す:
1. CSS: 追加した履歴関連スタイルを削除
2. HTML: `<div class="history-container">`を元の`<table>`形式に戻す
3. JavaScript: `addHistory`関数を元の`<tr>`作成方式に戻す

## ステータス

**✅ 実装済み** (2026-02-03 11:35)

> **注意**: この計画書は実装後に作成されました。今後は実装前に計画書を作成し、承認を得てから実装します。
