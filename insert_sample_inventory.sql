-- 入出庫履歴のサンプルデータ
-- 商品マスタに登録されている商品に対して、入庫・出庫のサンプルデータを登録

-- 商品ID: 17 (速乾インク C8842A) のサンプルデータ
-- 入庫: 100個
INSERT INTO `t_入出庫履歴` (
    `対象年月`, `倉庫ID`, `棚ID`, `商品ID`, `区分`, `数量`, 
    `登録者`, `登録日時`, `更新者`, `更新日時`, `削除フラグ`
) VALUES (
    202601, 1, 1, 17, 1, 100,
    1, NOW(), 1, NOW(), 0
);

-- 出庫: 30個
INSERT INTO `t_入出庫履歴` (
    `対象年月`, `倉庫ID`, `棚ID`, `商品ID`, `区分`, `数量`, 
    `登録者`, `登録日時`, `更新者`, `更新日時`, `削除フラグ`
) VALUES (
    202601, 1, 1, 17, 2, 30,
    1, NOW(), 1, NOW(), 0
);

-- 入庫: 50個
INSERT INTO `t_入出庫履歴` (
    `対象年月`, `倉庫ID`, `棚ID`, `商品ID`, `区分`, `数量`, 
    `登録者`, `登録日時`, `更新者`, `更新日時`, `削除フラグ`
) VALUES (
    202602, 1, 1, 17, 1, 50,
    1, NOW(), 1, NOW(), 0
);

-- 商品ID: 17 の理論在庫 = 100 - 30 + 50 = 120個


-- 商品ID: 18 (ボールペン 黒 012個入) のサンプルデータ
-- 入庫: 200個
INSERT INTO `t_入出庫履歴` (
    `対象年月`, `倉庫ID`, `棚ID`, `商品ID`, `区分`, `数量`, 
    `登録者`, `登録日時`, `更新者`, `更新日時`, `削除フラグ`
) VALUES (
    202601, 2, 3, 18, 1, 200,
    1, NOW(), 1, NOW(), 0
);

-- 出庫: 75個
INSERT INTO `t_入出庫履歴` (
    `対象年月`, `倉庫ID`, `棚ID`, `商品ID`, `区分`, `数量`, 
    `登録者`, `登録日時`, `更新者`, `更新日時`, `削除フラグ`
) VALUES (
    202601, 2, 3, 18, 2, 75,
    1, NOW(), 1, NOW(), 0
);

-- 出庫: 25個
INSERT INTO `t_入出庫履歴` (
    `対象年月`, `倉庫ID`, `棚ID`, `商品ID`, `区分`, `数量`, 
    `登録者`, `登録日時`, `更新者`, `更新日時`, `削除フラグ`
) VALUES (
    202602, 2, 3, 18, 2, 25,
    1, NOW(), 1, NOW(), 0
);

-- 商品ID: 18 の理論在庫 = 200 - 75 - 25 = 100個

-- 確認用クエリ
-- SELECT 
--     m.商品ID,
--     m.商品コード,
--     m.商品名,
--     SUM(CASE WHEN t.区分 = 1 THEN t.数量 ELSE 0 END) as 入庫合計,
--     SUM(CASE WHEN t.区分 = 2 THEN t.数量 ELSE 0 END) as 出庫合計,
--     SUM(CASE WHEN t.区分 = 1 THEN t.数量 ELSE 0 END) - 
--     SUM(CASE WHEN t.区分 = 2 THEN t.数量 ELSE 0 END) as 理論在庫
-- FROM m_商品マスタ m
-- LEFT JOIN t_入出庫履歴 t ON m.商品ID = t.商品ID AND t.削除フラグ = 0
-- GROUP BY m.商品ID, m.商品コード, m.商品名;
